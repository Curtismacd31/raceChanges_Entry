<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race Changes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #121212;
            color: #ffffff;
        }
        h2 {
            text-align: center;
            color: #ffffff;
        }
        .login-container {
            max-width: 300px;
            margin: 100px auto;
            padding: 20px;
            background: #1e1e1e;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.1);
        }
        label {
            font-weight: bold;
            color: #ffffff;
        }
        select, input, textarea {
            padding: 8px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #333;
            background-color: #333;
            color: #ffffff;
            width: 100%;
            box-sizing: border-box;
        }
        .changeText {
            height: 50px;
            resize: vertical;
        }
        button {
            padding: 10px;
            margin-top: 10px;
            background-color: #28a745;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
		.downloadBtn {
            background-color: #007bff;
        }
        .downloadBtn:hover {
            background-color: #0056b3;
        }
        .deleteBtn {
            background-color: #dc3545;
            padding: 5px 10px;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }
        .deleteBtn:hover {
            background-color: #c82333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #1e1e1e;
            table-layout: fixed;
        }
        th, td {
            padding: 10px;
            border: 1px solid #444;
            text-align: center;
            word-wrap: break-word;
        }
        th {
            background-color: #333;
            color: white;
        }
        td:nth-child(1) { width: 10%; }
        td:nth-child(2) { width: 10%; }
        td:nth-child(3) { width: 25%; }
        td:nth-child(4) { width: 45%; }
        td:nth-child(5) { width: 10%; }
        .hidden {
            display: none;
        }
		.popup {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: white;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
			z-index: 9999;
		}
		.hidden {
			display: none;
		}
    </style>
</head>
<body>
    <!-- Login Section -->
    <div class="login-container" id="loginPage">
        <h2>Enter Track Password</h2>
        <input type="password" id="passwordInput" placeholder="Enter Judges Number" onkeydown="checkEnter(event)">
        <button onclick="validateLogin()">Login</button>
    </div>

    <!-- Tabs Navigation -->
    <div id="tabs" class="container hidden">
        <button onclick="showTab('raceChangesTab')">Main</button>
        <button onclick="showTab('loadDataTab')">Load Data</button>
    </div>

    <!-- Race Changes Tab -->
    <div class="container hidden tab" id="raceChangesTab">
        <h2>Race Changes</h2>
        <label for="trackName">Track Name:</label>
        <select id="trackName" onchange="checkForExistingData()"></select>

        <label for="raceDate">Date:</label>
        <input type="date" id="raceDate" onchange="checkForExistingData()">

        <label for="trackCondition">TRACK:</label>
        <input type="text" id="trackCondition" placeholder="Enter Track Condition">

        <label for="weather">WEATHER:</label>
        <input type="text" id="weather" placeholder="Enter Weather Condition">

        <label for="variant">VARIANT:</label>
        <input type="text" id="variant" placeholder="Enter Variant">

        <button onclick="addRow()">Add Row</button>
        <button onclick="saveData()">Save</button>
        <button onclick="downloadPDF()" style="background-color: #007bff; color: white;" >Download PDF</button>

        <table>
            <thead>
                <tr>
                    <th>Race Number</th><th>Saddle Pad</th><th>Horse Name</th><th>Category</th><th>Change</th><th>Action</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>

    <!-- Load Data Tab -->
    <div class="container hidden tab" id="loadDataTab">
        <h2>Load Entry File</h2>
        <input type="file" id="entryFile" accept=".cam">
        <button onclick="uploadFile()">Load File</button>
    </div>

    <!-- Driver & Equipment Popups (unchanged) -->
    <!-- ... your driverPopup and equipmentPopup stay the same ... -->

    <script>
        // Tab Logic
        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.add('hidden');
            });
            document.getElementById(tabId).classList.remove('hidden');
        }

        // Call this after login is successful
        function onLoginSuccess() {
            document.getElementById("loginPage").classList.add("hidden");
            document.getElementById("tabs").classList.remove("hidden");
            showTab("raceChangesTab"); // Default to Main tab
        }
    </script>
</body>
<script src="script.js"></script>
</html>
